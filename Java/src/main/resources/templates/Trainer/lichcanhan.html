<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªãch D·∫°y C√° Nh√¢n (PT)</title>
    <link rel="stylesheet" th:href="@{/css/lichlop.css}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
<div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="user">
            <span class="user-icon">&#128100;</span>
            <div>
                <div class="user-title">HU·∫§N LUY·ªÜN VI√äN</div>
                <div style="font-size: 14px; color: #666; margin-top: 4px;" th:text="${trainer != null ? trainer.tenNV : 'Trang ch·ªß'}">Trang ch·ªß</div>
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="#" th:href="@{/trainer/home/{accountId}/{username}(accountId=${accountId}, username=${username})}">Trang ch·ªß</a></li>
                <li><a href="#" th:href="@{/trainer/lichlop/{accountId}/{username}(accountId=${accountId}, username=${username})}">L·ªãch d·∫°y l·ªõp</a></li>
                <li class="active"><a href="#">L·ªãch d·∫°y c√° nh√¢n</a></li>
                <li><a href="#">L∆∞∆°ng</a></li>
                <li><a href="#">Ph·∫£n h·ªìi/ Khi·∫øu n·∫°i</a></li>
                <li><a href="#">T√†i kho·∫£n</a></li>
            </ul>
        </nav>
        <form th:action="@{/logout}" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <button type="submit" class="logout-btn">ƒêƒÇNG XU·∫§T</button>
        </form>
    </aside>

    <!-- Main Content -->
    <div class="main-content">
        <h1>L·ªäCH D·∫†Y C√Å NH√ÇN (PERSONAL TRAINING)</h1>
        
        <!-- Debug Info -->
        <div style="background: #f0f0f0; padding: 20px; margin: 20px 0; border-radius: 8px;">
            <h3>üîç Debug Information:</h3>
            <p><strong>Account ID:</strong> <span th:text="${accountId}">N/A</span></p>
            <p><strong>Username:</strong> <span th:text="${username}">N/A</span></p>
            <p><strong>Trainer:</strong> <span th:text="${trainer != null ? trainer.tenNV + ' (' + trainer.maNV + ')' : 'N/A'}">N/A</span></p>
            <p><strong>S·ªë kh√°ch h√†ng PT:</strong> <span th:text="${dsPTCustomers != null ? dsPTCustomers.size() : 'N/A'}">N/A</span></p>
            <p><strong>S·ªë l·ªãch PT:</strong> <span th:text="${dsPTSchedules != null ? dsPTSchedules.size() : 'N/A'}">N/A</span></p>
            <p><strong>S·ªë ca t·∫≠p:</strong> <span th:text="${dsCaTap != null ? dsCaTap.size() : 'N/A'}">N/A</span></p>
            <p><strong>S·ªë khu v·ª±c:</strong> <span th:text="${dsKhuVuc != null ? dsKhuVuc.size() : 'N/A'}">N/A</span></p>
        </div>
        
        <!-- Error Message -->
        <div th:if="${error}" class="error-message" style="color: red; margin-bottom: 20px; padding: 10px; background: #ffebee; border: 1px solid #e57373; border-radius: 4px;">
            <span th:text="${error}"></span>
        </div>
        
        <!-- PT Customers Panel -->
        <div style="background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin: 20px 0; padding: 20px;">
            <h2>üèãÔ∏è‚Äç‚ôÇÔ∏è Kh√°ch H√†ng ƒê√£ ƒêƒÉng K√Ω PT</h2>
            <div th:if="${dsPTCustomers != null and !dsPTCustomers.isEmpty()}">
                <div th:each="customer : ${dsPTCustomers}" style="background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 8px; padding: 15px; margin: 10px 0;">
                    <h4 th:text="${customer.hoaDon.khachHang.hoTen}">T√™n kh√°ch h√†ng</h4>
                    <p th:text="'D·ªãch v·ª•: ' + ${customer.dichVu.tenDV}">D·ªãch v·ª•</p>
                    <p th:text="'Email: ' + ${customer.hoaDon.khachHang.email}">Email</p>
                    <p th:text="'SƒêT: ' + ${customer.hoaDon.khachHang.soDienThoai}">SƒêT</p>
                    <p th:text="'T·ª´: ' + ${#temporals.format(customer.ngayBD, 'dd/MM/yyyy')} + ' - ' + ${#temporals.format(customer.ngayKT, 'dd/MM/yyyy')}">Th·ªùi h·∫°n</p>
                    <button style="background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 5px; cursor: pointer;" 
                            th:data-customer-name="${customer.hoaDon.khachHang.hoTen}"
                            onclick="alert('S·∫Ω th√™m l·ªãch cho: ' + this.getAttribute('data-customer-name'))">
                        Th√™m L·ªãch T·∫≠p
                    </button>
                </div>
            </div>
            <div th:if="${dsPTCustomers == null or dsPTCustomers.isEmpty()}">
                <p style="text-align: center; color: #666; padding: 20px;">
                    Ch∆∞a c√≥ kh√°ch h√†ng n√†o ƒëƒÉng k√Ω PT v·ªõi b·∫°n.
                </p>
            </div>
        </div>
        
        <!-- PT Schedules Panel -->
        <div style="background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin: 20px 0; padding: 20px;">
            <h2>üìÖ L·ªãch PT Hi·ªán T·∫°i</h2>
            <div th:if="${dsPTSchedules != null and !dsPTSchedules.isEmpty()}">
                <div th:each="schedule : ${dsPTSchedules}" style="background: #fff3cd; border: 2px solid #ffeaa7; border-radius: 8px; padding: 15px; margin: 10px 0;">
                    <p><strong>M√£ l·ªãch:</strong> <span th:text="${schedule.maLT}">LT001</span></p>
                    <p><strong>Kh√°ch h√†ng:</strong> <span th:text="${schedule.khachHang != null ? schedule.khachHang.hoTen : 'N/A'}">N/A</span></p>
                    <p><strong>Ca t·∫≠p:</strong> <span th:text="${schedule.caTap != null ? schedule.caTap.tenCa + ' (' + schedule.caTap.moTa + ')' : 'N/A'}">N/A</span></p>
                    <p><strong>Th·ª©:</strong> <span th:text="${schedule.thu != null ? schedule.thu : 'N/A'}">N/A</span></p>
                    <p><strong>Khu v·ª±c:</strong> <span th:text="${schedule.khuVuc != null ? schedule.khuVuc.tenKhuVuc : 'Ch∆∞a x√°c ƒë·ªãnh'}">N/A</span></p>
                    <p><strong>Tr·∫°ng th√°i:</strong> <span th:text="${schedule.trangThai != null ? schedule.trangThai : 'N/A'}">N/A</span></p>
                </div>
            </div>
            <div th:if="${dsPTSchedules == null or dsPTSchedules.isEmpty()}">
                <p style="text-align: center; color: #666; padding: 20px;">
                    Ch∆∞a c√≥ l·ªãch d·∫°y PT n√†o ƒë∆∞·ª£c t·∫°o.
                </p>
            </div>
        </div>
        
        <!-- Test Button -->
        <div style="text-align: center; margin: 20px 0;">
            <button onclick="alert('Button clicked! Page is working.')" style="background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 5px; cursor: pointer; font-size: 16px;">
                üß™ Test Button
            </button>
        </div>
    </div>
</div>

<script>
    console.log('üéØ Trang l·ªãch d·∫°y c√° nh√¢n ƒë√£ load th√†nh c√¥ng!');
    console.log('Account ID:', /*[[${accountId}]]*/ 'null');
    console.log('Username:', /*[[${username}]]*/ 'null');
    console.log('Trainer:', /*[[${trainer}]]*/ 'null');
</script>
</body>
</html> 