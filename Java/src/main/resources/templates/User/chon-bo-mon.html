<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Ch·ªçn b·ªô m√¥n</title>
    <link rel="stylesheet" th:href="@{/css/dangkydv.css}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
<div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="user">
            <span class="user-icon">&#128100;</span>
            KH√ÅCH H√ÄNG
        </div>
        <nav>
            <ul>
                <li><a href="#" th:href="@{/user/home/{accountId}/{username}(accountId=${accountId}, username=${username})}">Trang ch·ªß</a></li>
                <li><a href="#" class="active">ƒêƒÉng k√Ω d·ªãch v·ª•</a></li>
                <li><a href="#">Thu√™ d·ª•ng c·ª•</a></li>
                <li><a href="#">Xem l·ªãch t·∫≠p</a></li>
                <li><a href="#">Ph·∫£n h·ªìi/ Khi·∫øu n·∫°i</a></li>
                <li><a href="#">Thanh to√°n</a></li>
                <li><a href="#" th:href="@{/dich-vu-gym/dich-vu-cua-toi(accountId=${accountId})}">D·ªãch v·ª• c·ªßa t√¥i</a></li>
                <li><a href="#">Theo d√µi khu v·ª±c</a></li>
                <li><a href="#">Voucher c·ªßa t√¥i</a></li>
                <li><a href="#">T√†i kho·∫£n</a></li>
            </ul>
        </nav>
        <form th:action="@{/logout}" method="post" style="margin: 0;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit" class="logout-btn">ƒêƒÇNG XU·∫§T</button>
        </form>
    </aside>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Hidden form to submit payment data -->
        <form id="payment-form" action="/dich-vu-gym/dang-ky-dv" method="post" style="display: none;">
            <input type="hidden" name="maKH" th:value="${maKH}" id="maKH-input">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <div id="dsMaDV-inputs">
                <!-- Service codes will be added here dynamically -->
            </div>
        </form>
        
        <!-- Thanh hi·ªÉn th·ªã d·ªãch v·ª• ƒë√£ ƒëƒÉng k√Ω -->
        <div id="registered-services-bar" style="display:none;">
            <div class="registered-header">
                <h3>D·ªãch v·ª• ƒë√£ ƒëƒÉng k√Ω</h3>
                <div class="header-actions">
                    <span id="total-amount"></span>
                    <button class="payment-btn" onclick="processPayment()">THANH TO√ÅN</button>
                    <button class="toggle-btn" onclick="toggleRegisteredServices()">·∫®n/Hi·ªán</button>
                </div>
            </div>
            <div class="registered-list" id="registered-list">
                <!-- Danh s√°ch d·ªãch v·ª• ƒë√£ ƒëƒÉng k√Ω s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
            </div>
        </div>
        <div th:if="${error}" class="alert alert-danger" style="color: red; font-weight: 500; text-align: center; margin-bottom: 20px;">
            <p th:text="${error}"></p>
        </div>

        
        <h1>CH·ªåN B·ªò M√îN</h1>
        <p style="text-align: center; font-size: 18px; color: #666; margin-bottom: 40px;">
            Vui l√≤ng ch·ªçn b·ªô m√¥n ƒë·ªÉ xem c√°c d·ªãch v·ª• c√≥ s·∫µn
        </p>
        
        <!-- Container hi·ªÉn th·ªã danh s√°ch b·ªô m√¥n -->
        <div class="bo-mon-grid">
            <div th:each="boMon : ${dsBoMon}" class="bo-mon-card">
                <form th:action="@{/dich-vu-gym/dich-vu-theo-bo-mon}" method="get" style="text-align: center;">
                    <input type="hidden" name="maBM" th:value="${boMon.maBM}">
                    <input type="hidden" name="accountId" th:value="${accountId}">
                    
                    <div class="bo-mon-icon">
                        <!-- Icon t√πy theo t√™n b·ªô m√¥n -->
                        <span th:if="${boMon.tenBM.contains('Gym')}" class="icon">üèãÔ∏è</span>
                        <span th:if="${boMon.tenBM.contains('Yoga')}" class="icon">üßò</span>
                        <span th:if="${boMon.tenBM.contains('Zumba')}" class="icon">üíÉ</span>
                        <span th:if="${boMon.tenBM.contains('Cardio')}" class="icon">üèÉ</span>
                        <span th:if="${boMon.tenBM.contains('B∆°i') || boMon.tenBM.contains('Boi')}" class="icon">üèä</span>
                        <span th:unless="${boMon.tenBM.contains('Gym') || boMon.tenBM.contains('Yoga') || boMon.tenBM.contains('Zumba') || boMon.tenBM.contains('Cardio') || boMon.tenBM.contains('B∆°i') || boMon.tenBM.contains('Boi')}" class="icon">üéØ</span>
                    </div>
                    
                    <div class="bo-mon-name" th:text="${boMon.tenBM}"></div>
                    <div class="bo-mon-description">Nh·∫•n ƒë·ªÉ xem d·ªãch v·ª•</div>
                    
                    <button type="submit" class="bo-mon-btn">Ch·ªçn b·ªô m√¥n n√†y</button>
                </form>
            </div>
        </div>
        
        <!-- Hi·ªÉn th·ªã th√¥ng b√°o n·∫øu kh√¥ng c√≥ b·ªô m√¥n -->
        <div th:if="${#lists.isEmpty(dsBoMon)}" style="text-align: center; padding: 60px; color: #999;">
            <h3>Hi·ªán t·∫°i ch∆∞a c√≥ b·ªô m√¥n n√†o</h3>
            <p>Vui l√≤ng li√™n h·ªá qu·∫£n tr·ªã vi√™n ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£</p>
        </div>
    </div>
</div>

<style>
/* Custom styles cho trang ch·ªçn b·ªô m√¥n */
.bo-mon-btn {
    background: linear-gradient(45deg, #ff6b8a, #ff8686);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-top: 16px;
    box-shadow: 0 4px 12px rgba(255, 107, 138, 0.3);
}

.bo-mon-btn:hover {
    background: linear-gradient(45deg, #ff5577, #d84343);
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(255, 107, 138, 0.4);
}

.bo-mon-card form {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
}
</style>

<script src="/js/dangkydv.js"></script>
</body>
</html> 